document.onreadystatechange=function(){if("complete"===document.readyState){var O=function(b,d){B&&clearInterval(B);C&&clearInterval(C);D&&clearInterval(D);e.hasAttribute("class")&&e.classList.contains("disabled")&&(e.classList.remove("disabled"),e.classList.add("enabled"));p.hasAttribute("class")&&p.classList.contains("disabled")&&(p.classList.remove("disabled"),p.classList.add("enabled"));0<b&&g.hasAttribute("class")&&g.classList.contains("disabled")?(g.classList.remove("disabled"),g.classList.add("enabled")):
0>=b&&g.hasAttribute("class")&&g.classList.contains("enabled")&&(g.classList.remove("enabled"),g.classList.add("disabled"));b<a.playlist.length-1&&h.hasAttribute("class")&&h.classList.contains("disabled")?(h.classList.remove("disabled"),h.classList.add("enabled")):b>=a.playlist.length-1&&h.hasAttribute("class")&&h.classList.contains("enabled")&&(h.classList.remove("enabled"),h.classList.add("disabled"));for(var f=x.rows,m=0;m<f.length;m++)f[m].hasAttribute("class")&&f[m].classList.contains("row-playing")&&
(f[m].classList.remove("row-playing"),f[m].classList.add("row-paused"));1==a["interface"].showPlaylist&&(x.firstElementChild.children[b].classList.remove("row-paused"),x.firstElementChild.children[b].classList.add("row-playing"));!0===d&&(f=a.playlist[b].hasOwnProperty("artistName")?a.playlist[b].artistName:"Nieznany artysta",m=a.playlist[b].hasOwnProperty("trackName")?a.playlist[b].trackName:"Nieznany utw\u00f3r",E.innerText=f,F.innerText=m,a.playlist[b].hasOwnProperty("coverFile")?(f=(a.playlist[b].hasOwnProperty("albumName")?
a["interface"].coverImageTitle+" "+a.playlist[b].albumName:a["interface"].noCoverImageTitle)+" "+(a.playlist[k].hasOwnProperty("releaseYear")?"z roku "+a.playlist[b].releaseYear:"z nieznanego roku")+(a.playlist[b].hasOwnProperty("artistName")?" artysty "+a.playlist[b].artistName:" nieznanego artysty"),q.firstElementChild.src="audio-web-player/awp-thumbnails/"+a.playlist[b].coverFile,n.src="audio-web-player/awp-covers/"+a.playlist[b].coverFile):(q.firstElementChild.src="audio-web-player/awp-sources/album-cover-thumbnail.png",
n.src="audio-web-player/awp-sources/album-cover.png",f="Brak ok\u0142adki"),q.firstElementChild.setAttribute("title",f),n.setAttribute("title",f),n.setAttribute("alt",f),l.src="audio-web-player/awp-tracks/"+a.playlist[b].trackFile,M(!0));c.hasAttribute("class")&&c.classList.contains("audio-web-player-stopped")?(c.classList.remove("audio-web-player-stopped"),c.classList.add("audio-web-player-playing"),e.setAttribute("title","Wstrzymaj odtwarzanie utworu"),l.play(),B=setInterval(y,1E3)):c.hasAttribute("class")&&
c.classList.contains("audio-web-player-paused")?(c.classList.remove("audio-web-player-paused"),c.classList.add("audio-web-player-playing"),e.setAttribute("title","Wstrzymaj odtwarzanie utworu"),l.play(),C=setInterval(y,1E3)):c.hasAttribute("class")&&c.classList.contains("audio-web-player-playing")&&(!0===d?(e.setAttribute("title","Wstrzymaj odtwarzanie utworu"),l.play(),D=setInterval(y,1E3)):!1===d&&(c.classList.remove("audio-web-player-playing"),c.classList.add("audio-web-player-paused"),e.setAttribute("title",
"Kontynuuj odtwarzanie utworu"),l.pause()))},N=function(b,d,c,e){var g=10>d?"0"+d:d,h=10>e?"0"+e:e,k=10>b?"0"+b:b,l=10>c?"0"+c:c,f=60*b+d,n=10>f?"0"+f:f,p=(100>f&&10<=f?"0"+f:10>f)?"00"+f:f,m=60*c+e,q=10>m?"0"+m:m,t=(100>m&&10<=m?"0"+m:10>m)?"00"+m:m;b=a["interface"].timeFormat.replace("$cur_min_1$",b).replace("$cur_min_2$",k).replace("$cur_sec_1$",d).replace("$cur_sec_2$",g).replace("$dur_min_1$",c).replace("$dur_min_2$",l).replace("$dur_sec_1$",e).replace("$dur_sec_2$",h).replace("$full_cur_sec_1$",
f).replace("$full_cur_sec_2$",n).replace("$full_cur_sec_3$",p).replace("$full_dur_sec_1$",m).replace("$full_dur_sec_2$",q).replace("$full_dur_sec_3$",t);J.innerText=b},M=function(c){var b=0,f=0;1==c&&(f=Math.floor(a.playlist[k].durationTimeSeconds),b=Math.floor(a.playlist[k].durationTimeMinutes));r.firstElementChild.style.width="0";N(0,0,b,f)},y=function(){var a=Math.floor(l.currentTime/60),c=Math.floor(l.currentTime%60),f=Math.floor(l.duration/60),e=Math.floor(l.duration%60);r.firstElementChild.style.width=
l.currentTime/l.duration*100+"%";N(a,c,f,e)},a,P=!1,k,B,C,D,c=document.getElementById("audio-web-player"),t=document.createElement("div");t.id="audio-web-player-modal-window-wrapper";t.className="not-displayed";var u=document.createElement("div");u.className="audio-web-player-modal-window";t.appendChild(u);var v=document.createElement("img");v.id="audio-web-player-modal-window-close-icon";v.setAttribute("src","audio-web-player/awp-sources/close.svg");v.setAttribute("alt","Ikona do zamykania podgl\u0105du ok\u0142adki albumu");
v.setAttribute("title","Zamknij podgl\u0105d ok\u0142adki albumu");u.appendChild(v);var n=document.createElement("img");u.appendChild(n);var z=document.createElement("div");z.id="audio-web-player-tooltip";var l=document.createElement("audio"),A=document.createElement("h1"),Q=document.createElement("div"),q=document.createElement("div");q.id="audio-web-player-cover-image";Q.appendChild(q);var G=document.createElement("img");q.appendChild(G);u=document.createElement("div");Q.appendChild(u);var K=document.createElement("div");
u.appendChild(K);var F=document.createElement("div");F.id="audio-web-player-track-title";F.innerHTML="Tytu\u0142 utworu";K.appendChild(F);var E=document.createElement("div");E.id="audio-web-player-artist-name";E.innerHTML="Nazwa artysty";K.appendChild(E);var H=document.createElement("div"),g=document.createElement("div");g.id="audio-web-player-prev-icon";g.setAttribute("class","");g.setAttribute("title","Przejd\u017a do poprzedniego utworu");H.prepend(g);var e=document.createElement("div");e.id="audio-web-player-play-pause-icon";
e.setAttribute("class","");e.style.display="block";e.setAttribute("title","Rozpocznij odtwarzanie utworu");H.appendChild(e);var p=document.createElement("div");p.id="audio-web-player-stop-icon";p.className="disabled";p.setAttribute("title","Zatrzymaj odtwarzanie utworu");H.appendChild(p);u.appendChild(H);var h=document.createElement("div");h.id="audio-web-player-next-icon";h.setAttribute("class","");h.setAttribute("title","Przejd\u017a do nast\u0119pnego utworu");H.appendChild(h);audioWebPlayerVolumeKnobIconElement=
document.createElement("div");audioWebPlayerVolumeKnobIconElement.id="audio-web-player-volume-knob-icon";audioWebPlayerVolumeKnobIconElement.setAttribute("title","Zmie\u0144 poziom g\u0142o\u015bno\u015bci");var J=document.createElement("div");J.id="audio-web-player-progress-time";H.appendChild(J);var r=document.createElement("div");r.id="audio-web-player-progress-bar";u.appendChild(r);u=document.createElement("div");r.appendChild(u);var I=document.createElement("div"),x=document.createElement("table");
if("http:"==window.location.protocol||"https:"==window.location.protocol){var L=new XMLHttpRequest;L.open("GET","audio-web-player/awp-sources/settings.json",!0);L.send(null);L.onreadystatechange=function(){if(4===L.readyState&&200===L.status)try{a=JSON.parse(L.responseText);l.volume="full"==a["interface"].setVolumeOfSound?1:parseFloat(a["interface"].setVolumeOfSound)/100;A.innerHTML=a["interface"].headerTitle;n.id="audio-web-player-modal-window-main-image";1==a["interface"].showPreviousButton&&(g.style.display=
"block");1==a["interface"].showNextButton&&(h.style.display="block");1==a["interface"].showStopButton&&(p.style.display="block",p.addEventListener("click",function(){B&&clearInterval(B);C&&clearInterval(C);D&&clearInterval(D);if(c.hasAttribute("class")&&(c.classList.contains("audio-web-player-playing")||c.classList.contains("audio-web-player-paused"))){c.classList.contains("audio-web-player-playing")&&c.classList.remove("audio-web-player-playing");c.classList.contains("audio-web-player-paused")&&
c.classList.remove("audio-web-player-paused");c.classList.add("audio-web-player-stopped");l.pause();l.currentTime=0;F.innerText=a["interface"].trackTitleStopped;E.innerText=a["interface"].artistNameStopped;n.id="audio-web-player-modal-window-main-image";n.setAttribute("src","audio-web-player/awp-sources/album-cover.png");n.setAttribute("alt",a["interface"].coverImageTitle);n.setAttribute("title",a["interface"].coverImageTitle);G.setAttribute("src","audio-web-player/awp-sources/album-cover.png");G.setAttribute("alt",
a["interface"].coverImageTitle);G.setAttribute("title",a["interface"].coverImageTitle);g.hasAttribute("class")&&g.classList.contains("enabled")&&(g.classList.remove("enabled"),g.classList.add("disabled"));e.hasAttribute("class")&&e.classList.contains("enabled")&&(e.classList.remove("enabled"),e.classList.add("disabled"));h.hasAttribute("class")&&h.classList.contains("enabled")&&(h.classList.remove("enabled"),h.classList.add("disabled"));p.hasAttribute("class")&&p.classList.contains("enabled")&&(p.classList.remove("enabled"),
p.classList.add("disabled"));e.setAttribute("title","Rozpocznij odtwarzanie utworu");for(var b=x.rows,d=0;d<b.length;d++)b[d].hasAttribute("class")&&b[d].classList.contains("row-playing")&&(b[d].classList.remove("row-playing"),b[d].classList.add("row-paused"))}M()},!1));1==a["interface"].showVolumeKnob&&(audioWebPlayerVolumeKnobIconElement.style.display="block",document.body.addEventListener("mouseup",function(){P=!1;z.style.display="none"},!0),audioWebPlayerVolumeKnobIconElement.addEventListener("mousedown",
function(a){a.preventDefault();P=!0;z.style.display="block"}),audioWebPlayerVolumeKnobIconElement.addEventListener("mouseup",function(a){a.preventDefault();P=!1;z.style.display="none"}),audioWebPlayerVolumeKnobIconElement.addEventListener("mousemove",function(a){if(!0===P){var b=180*Math.atan2(window.scrollY+audioWebPlayerVolumeKnobIconElement.getBoundingClientRect().top+audioWebPlayerVolumeKnobIconElement.getBoundingClientRect().height/2-a.clientY,window.scrollX+audioWebPlayerVolumeKnobIconElement.getBoundingClientRect().left+
audioWebPlayerVolumeKnobIconElement.getBoundingClientRect().width/2-a.clientX)/Math.PI;if(-45<b||-135>b)audioWebPlayerVolumeKnobIconElement.firstChild.style.transform="rotate("+(b-45).toString()+"deg)",-45<b?(l.volume=(b+45)/270,z.innerHTML="G\u0142o\u015bno\u015b\u0107:&nbsp;"+Math.floor((b+45)/270*100).toString()+"% "):-135>b&&(l.volume=(b+405)/270,z.innerHTML="G\u0142o\u015bno\u015b\u0107:&nbsp;"+Math.ceil((b+405)/270*100).toString()+"%"),z.style.left=(a.clientX-c.getBoundingClientRect().left+
10).toString()+"px",z.style.top=(a.clientY-c.getBoundingClientRect().top+15).toString()+"px"}}),audioWebPlayerArrowElement=document.createElement("img"),audioWebPlayerArrowElement.setAttribute("src","audio-web-player/awp-sources/arrow.svg"),audioWebPlayerArrowElement.setAttribute("alt","Strza\u0142ka"),audioWebPlayerArrowElement.style.transform="full"==a["interface"].setVolumeOfSound?"rotate("+(180).toString()+"deg)":"rotate("+(parseFloat(a["interface"].setVolumeOfSound)/100*270-90).toString()+"deg)",
audioWebPlayerVolumeKnobIconElement.appendChild(audioWebPlayerArrowElement),H.appendChild(audioWebPlayerVolumeKnobIconElement));c.appendChild(l);c.appendChild(z);c.appendChild(A);c.appendChild(Q);c.after(t);if(1==a["interface"].showPlaylist){I.innerHTML=a["interface"].playlistHeaderSubtitle;Q.after(I);x.id="audio-web-player-playlist";I.after(x);var b=document.createElement("tbody");x.appendChild(b);for(var d=0;d<a.playlist.length;d++){var f=document.createElement("tr"),m=document.createElement("td"),
u=document.createElement("td"),r=Math.floor(a.playlist[d].durationTimeSeconds),v=Math.floor(a.playlist[d].durationTimeMinutes),y=10>r?"0"+r:r,J=10>v?"0"+v:v,w=60*v+r,K=10>w?"0"+w:w,N=(100>w&&10<=w?"0"+w:10>w)?"00"+w:w,T=a["interface"].playlistItemTitleFormat.replace("$artist_name$",a.playlist[d].artistName?a.playlist[d].artistName:"Nieznany artysta").replace("$track_name$",a.playlist[d].trackName?a.playlist[d].trackName:"Nieznany utw\u00f3r").replace("$album_name$",a.playlist[d].albumName?a.playlist[d].albumName:
"nieznanego").replace("$release_year$",a.playlist[d].releaseYear?a.playlist[d].releaseYear:"nieznanego").replace("$dur_min_1$",v).replace("$dur_min_2$",J).replace("$dur_sec_1$",r).replace("$dur_sec_2$",y).replace("$full_dur_sec_1$",w).replace("$full_dur_sec_2$",K).replace("$full_dur_sec_3$",N),U=a["interface"].playlistItemSubitleFormat.replace("$artist_name$",a.playlist[d].artistName?a.playlist[d].artistName:"Nieznany artysta").replace("$track_name$",a.playlist[d].trackName?a.playlist[d].trackName:
"Nieznany utw\u00f3r").replace("$album_name$",a.playlist[d].albumName?a.playlist[d].albumName:"nieznanego").replace("$release_year$",a.playlist[d].releaseYear?a.playlist[d].releaseYear:"nieznanego").replace("$dur_min_1$",v).replace("$dur_min_2$",J).replace("$dur_sec_1$",r).replace("$dur_sec_2$",y).replace("$full_dur_sec_1$",w).replace("$full_dur_sec_2$",K).replace("$full_dur_sec_3$",N),y=T+"<br /><small>"+U+"</small>";m.innerHTML=d+1+".";u.innerHTML=y;f.className="row-paused";b.appendChild(f).appendChild(m);
b.appendChild(f).appendChild(u)}1==a["interface"].showPlaylist&&"none"!=a["interface"].selectedTrack&&(x.firstElementChild.children[a["interface"].selectedTrack-1].classList.remove("row-paused"),x.firstElementChild.children[a["interface"].selectedTrack-1].classList.add("row-playing"));for(var S=x.getElementsByTagName("td"),b=0;b<S.length;b++)S[b].addEventListener("click",function(){k=this.parentNode.rowIndex;this.parentNode.hasAttribute("class")&&this.parentNode.classList.contains("row-paused")&&
O(k,!0)},!1)}if("none"==a["interface"].selectedTrack)c.className="audio-web-player-stopped",F.innerText=a["interface"].trackTitleStopped,E.innerText=a["interface"].artistNameStopped,n.setAttribute("src","audio-web-player/awp-sources/album-cover.png"),n.setAttribute("alt",a["interface"].coverImageTitle),n.setAttribute("title",a["interface"].coverImageTitle),G.setAttribute("src","audio-web-player/awp-sources/album-cover.png"),G.setAttribute("alt",a["interface"].coverImageTitle),G.setAttribute("title",
a["interface"].coverImageTitle),q.setAttribute("title",a["interface"].coverImageTitle),e.hasAttribute("class")&&e.classList.add("disabled"),g.hasAttribute("class")&&g.classList.add("disabled"),h.hasAttribute("class")&&h.classList.add("disabled"),M();else{c.className="audio-web-player-paused";k=a["interface"].selectedTrack-1;var W=a.playlist[k].hasOwnProperty("artistName")?a.playlist[k].artistName:"Nieznany artysta",X=a.playlist[k].hasOwnProperty("trackName")?a.playlist[k].trackName:"Nieznany utw\u00f3r";
E.innerText=W;F.innerText=X;if(a.playlist[k].hasOwnProperty("coverFile")){var R=(a.playlist[k].hasOwnProperty("albumName")?a["interface"].coverImageTitle+" "+a.playlist[k].albumName:a["interface"].noCoverImageTitle)+" "+(a.playlist[k].hasOwnProperty("releaseYear")?"z roku "+a.playlist[k].releaseYear:"z nieznanego roku")+(a.playlist[k].hasOwnProperty("artistName")?" artysty "+a.playlist[k].artistName:" nieznanego artysty");q.firstElementChild.src="audio-web-player/awp-thumbnails/"+a.playlist[k].coverFile;
n.src="audio-web-player/awp-covers/"+a.playlist[k].coverFile}else q.firstElementChild.src="audio-web-player/awp-sources/album-cover-thumbnail.png",n.src="audio-web-player/awp-sources/album-cover.png",R="Brak ok\u0142adki";q.firstElementChild.setAttribute("title",R);n.setAttribute("title",R);n.setAttribute("alt",R);l.src="audio-web-player/awp-tracks/"+a.playlist[k].trackFile;e.hasAttribute("class")&&e.classList.add("enabled");0<a["interface"].selectedTrack-1&&g.hasAttribute("class")?g.classList.add("enabled"):
0>=a["interface"].selectedTrack-1&&g.hasAttribute("class")&&g.classList.add("disabled");a["interface"].selectedTrack-1<a.playlist.length-1&&h.hasAttribute("class")?h.classList.add("enabled"):a["interface"].selectedTrack-1>=a.playlist.length-1&&h.hasAttribute("class")&&h.classList.add("disabled");M(!0)}}catch(V){console.log(V),c.appendChild(A),I.innerHTML="Wyst\u0105pi\u0142 b\u0142\u0105d podczas wczytywania pliku JSON z&nbsp;ustawieniami!",A.after(I),A.innerHTML="B\u0142\u0105d aplikacji"}}}else c.appendChild(A),
I.innerHTML="Nie mo\u017cna uruchomi\u0107 aplikacji lokalnie!<br />Prosz\u0119 najpierw umie\u015bci\u0107 j\u0105 na serwerze WWW.",A.after(I),A.innerHTML="B\u0142\u0105d aplikacji";e&&e.addEventListener("click",function(){this.hasAttribute("class")&&this.classList.contains("enabled")&&O(k,!1)},!1);g&&g.addEventListener("click",function(){this.hasAttribute("class")&&this.classList.contains("enabled")&&(k--,O(k,!0))},!1);h&&h.addEventListener("click",function(){this.hasAttribute("class")&&this.classList.contains("enabled")&&
(k++,O(k,!0))},!1);r&&r.addEventListener("click",function(a){if(c.hasAttribute("class")&&c.classList.contains("audio-web-player-playing")){var b=a.target.getBoundingClientRect();l.currentTime=(a.clientX-b.left)/this.offsetWidth*l.duration;y()}},!1);q&&q.addEventListener("click",function(){t.hasAttribute("class")&&t.classList.contains("not-displayed")&&(t.classList.remove("not-displayed"),t.classList.add("displayed"))},!1);v&&v.addEventListener("click",function(){t.hasAttribute("class")&&t.classList.contains("displayed")&&
(t.classList.remove("displayed"),t.classList.add("not-displayed"))},!1);l&&l.addEventListener("ended",function(){B&&clearInterval(B);C&&clearInterval(C);D&&clearInterval(D);this.currentTime=0;c.hasAttribute("class")&&c.classList.contains("audio-web-player-playing")&&(c.classList.remove("audio-web-player-playing"),c.classList.add("audio-web-player-paused"));e.setAttribute("title","Rozpocznij odtwarzanie utworu");M(!0)})}};
